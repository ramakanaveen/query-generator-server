<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <!-- Background -->
  <rect width="900" height="600" fill="#f5f5f5" />
  
  <!-- Tables -->
  <!-- schema_definitions -->
  <rect x="50" y="50" width="200" height="120" rx="5" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" />
  <text x="150" y="80" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">schema_definitions</text>
  <line x1="50" y1="90" x2="250" y2="90" stroke="#1976d2" stroke-width="1" />
  <text x="60" y="110" font-family="Arial" font-size="12">id: SERIAL PRIMARY KEY</text>
  <text x="60" y="130" font-family="Arial" font-size="12">name: VARCHAR(100)</text>
  <text x="60" y="150" font-family="Arial" font-size="12">description: TEXT</text>

  <!-- schema_versions -->
  <rect x="350" y="50" width="200" height="170" rx="5" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" />
  <text x="450" y="80" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">schema_versions</text>
  <line x1="350" y1="90" x2="550" y2="90" stroke="#1976d2" stroke-width="1" />
  <text x="360" y="110" font-family="Arial" font-size="12">id: SERIAL PRIMARY KEY</text>
  <text x="360" y="130" font-family="Arial" font-size="12">schema_id: INTEGER FK</text>
  <text x="360" y="150" font-family="Arial" font-size="12">version: INTEGER</text>
  <text x="360" y="170" font-family="Arial" font-size="12">status: VARCHAR(20)</text>
  <text x="360" y="190" font-family="Arial" font-size="12">created_at: TIMESTAMP</text>
  <text x="360" y="210" font-family="Arial" font-size="12">metadata: JSONB</text>

  <!-- table_definitions -->
  <rect x="650" y="50" width="200" height="180" rx="5" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" />
  <text x="750" y="80" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">table_definitions</text>
  <line x1="650" y1="90" x2="850" y2="90" stroke="#1976d2" stroke-width="1" />
  <text x="660" y="110" font-family="Arial" font-size="12">id: SERIAL PRIMARY KEY</text>
  <text x="660" y="130" font-family="Arial" font-size="12">schema_version_id: INTEGER FK</text>
  <text x="660" y="150" font-family="Arial" font-size="12">name: VARCHAR(100)</text>
  <text x="660" y="170" font-family="Arial" font-size="12">description: TEXT</text>
  <text x="660" y="190" font-family="Arial" font-size="12">content: JSONB</text>
  <text x="660" y="210" font-family="Arial" font-size="12">embedding: vector(768)</text>

  <!-- active_schemas -->
  <rect x="200" y="270" width="200" height="120" rx="5" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" />
  <text x="300" y="300" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">active_schemas</text>
  <line x1="200" y1="310" x2="400" y2="310" stroke="#2e7d32" stroke-width="1" />
  <text x="210" y="330" font-family="Arial" font-size="12">schema_id: INTEGER FK PK</text>
  <text x="210" y="350" font-family="Arial" font-size="12">current_version_id: INTEGER FK</text>
  <text x="210" y="370" font-family="Arial" font-size="12">last_updated: TIMESTAMP</text>

  <!-- schema_examples -->
  <rect x="500" y="270" width="200" height="140" rx="5" fill="#fff3e0" stroke="#e65100" stroke-width="2" />
  <text x="600" y="300" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">schema_examples</text>
  <line x1="500" y1="310" x2="700" y2="310" stroke="#e65100" stroke-width="1" />
  <text x="510" y="330" font-family="Arial" font-size="12">id: SERIAL PRIMARY KEY</text>
  <text x="510" y="350" font-family="Arial" font-size="12">schema_version_id: INTEGER FK</text>
  <text x="510" y="370" font-family="Arial" font-size="12">table_id: INTEGER FK</text>
  <text x="510" y="390" font-family="Arial" font-size="12">natural_language_query: TEXT</text>
  <text x="510" y="410" font-family="Arial" font-size="12">generated_query: TEXT</text>

  <!-- table_relationships (optional) -->
  <rect x="350" y="450" width="200" height="130" rx="5" fill="#e0f7fa" stroke="#006064" stroke-width="2" stroke-dasharray="5,2" />
  <text x="450" y="480" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold" fill="#006064">table_relationships</text>
  <line x1="350" y1="490" x2="550" y2="490" stroke="#006064" stroke-width="1" stroke-dasharray="5,2" />
  <text x="360" y="510" font-family="Arial" font-size="12" fill="#006064">id: SERIAL PRIMARY KEY</text>
  <text x="360" y="530" font-family="Arial" font-size="12" fill="#006064">schema_version_id: INTEGER FK</text>
  <text x="360" y="550" font-family="Arial" font-size="12" fill="#006064">source_table_id: INTEGER FK</text>
  <text x="360" y="570" font-family="Arial" font-size="12" fill="#006064">target_table_id: INTEGER FK</text>
  
  <!-- Relationships -->
  <!-- schema_definitions to schema_versions -->
  <line x1="250" y1="110" x2="350" y2="130" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- schema_versions to table_definitions -->
  <line x1="550" y1="130" x2="650" y2="130" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- schema_definitions to active_schemas -->
  <line x1="150" y1="170" x2="210" y2="270" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- schema_versions to active_schemas -->
  <line x1="450" y1="220" x2="390" y2="270" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- schema_versions to schema_examples -->
  <line x1="520" y1="220" x2="590" y2="270" stroke="#e65100" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- table_definitions to schema_examples -->
  <line x1="700" y1="230" x2="650" y2="270" stroke="#e65100" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- schema_versions to table_relationships -->
  <line x1="400" y1="220" x2="400" y2="450" stroke="#006064" stroke-width="2" stroke-dasharray="5,2" marker-end="url(#arrowhead)" />
  
  <!-- table_definitions to table_relationships (source) -->
  <line x1="650" y1="220" x2="450" y2="450" stroke="#006064" stroke-width="2" stroke-dasharray="5,2" marker-end="url(#arrowhead)" />
  
  <!-- table_definitions to table_relationships (target) -->
  <path d="M 700 230 C 700 350 600 400 550 450" stroke="#006064" stroke-width="2" stroke-dasharray="5,2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Arrowhead definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  
  <!-- Process Flow -->
  <rect x="50" y="430" width="200" height="150" rx="5" fill="#fff" stroke="#333" stroke-width="1" />
  <text x="150" y="450" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Import Flow</text>
  <line x1="50" y1="460" x2="250" y2="460" stroke="#333" stroke-width="1" />
  <text x="60" y="480" font-family="Arial" font-size="12">1. Create schema definition</text>
  <text x="60" y="500" font-family="Arial" font-size="12">2. Create schema version</text>
  <text x="60" y="520" font-family="Arial" font-size="12">3. Split JSON into tables</text>
  <text x="60" y="540" font-family="Arial" font-size="12">4. Generate table embeddings</text>
  <text x="60" y="560" font-family="Arial" font-size="12">5. Import examples</text>
  
  <rect x="650" y="430" width="200" height="150" rx="5" fill="#fff" stroke="#333" stroke-width="1" />
  <text x="750" y="450" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Query Flow</text>
  <line x1="650" y1="460" x2="850" y2="460" stroke="#333" stroke-width="1" />
  <text x="660" y="480" font-family="Arial" font-size="12">1. Generate query embedding</text>
  <text x="660" y="500" font-family="Arial" font-size="12">2. Find similar tables</text>
  <text x="660" y="520" font-family="Arial" font-size="12">3. Combine relevant tables</text>
  <text x="660" y="540" font-family="Arial" font-size="12">4. Get relevant examples</text>
  <text x="660" y="560" font-family="Arial" font-size="12">5. Generate database query</text>
</svg>
